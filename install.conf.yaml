- defaults:
    shell:
      stdout: true
      stderr: true

- clean: ['~']

- link:
    ~/Brewfile:
    ~/.gitconfig:
    ~/.gitignore:
    ~/.jrnl_config:
    ~/.zshrc:
    ~/.gradle/gradle.properties:
      path: gradle.properties
      create: true
    ~/.config/nixpkgs/config.nix:
      path: config.nix
      create: true
    ~/Library/Application Support/pip/pip.conf:
      path: pip.conf
      create: true

- shell:
  - command: git submodule update --init --recursive
    description: Install submodules
  - command: ./brew.sh
    description: Install homebrew if not present
  - command: brew update
    description: Update homebrew
  - command: brew bundle
    description: Install and upgrade homebrew recipes
  - command: ./nix.sh
    description: Install nix if not present
  - command: nix-channel --add https://nixos.org/channels/nixpkgs-unstable
    description: add nixpkgs-unstable
  - command: nix-env -i all
    description: Install nix packages
  - command: ./zsh.sh
    description: Enable zsh if necessary
